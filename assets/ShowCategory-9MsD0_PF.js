import{r as a,j as e,b as v,u as N}from"./app-YqbZbuVU.js";import{A as w}from"./AuthenticatedLayout-tloQl2eS.js";import{d as u}from"./index-EOrXzSPM.js";import{Q as C,B as h}from"./react-toastify.esm-8tzANVMn.js";import{d as k}from"./categorySlice-RO2hvCOa.js";import"./ApplicationLogo-OtsA7yx0.js";import"./transition-VQNg_2km.js";import"./clsx-Zbgk8kpT.js";const S=({isOpen:t,onClose:i,category:r,onSave:d})=>{const[o,m]=a.useState(r.title),[n,c]=a.useState(r.description),x=()=>{d({id:r.id,title:o,description:n}),i()};return e.jsx("div",{className:`fixed z-10 inset-0 overflow-y-auto ${t?"block":"hidden"}`,children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:i})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen"}),"â€‹",e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:"Edit Category"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:o,onChange:l=>m(l.target.value),className:"mt-1 p-2 w-full border rounded-md"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:n,onChange:l=>c(l.target.value),className:"mt-1 p-2 w-full border rounded-md"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{onClick:x,type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-500 text-base font-medium text-white hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Save"}),e.jsx("button",{onClick:i,type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})},Q=({category:t,auth:i})=>{v(s=>s.counter.value);const r=N(),d=i.user.is_admin,o=i.user.id===t.user.id,[m,n]=a.useState(!1),[c,x]=a.useState({id:t.id,title:t.title,description:t.description});console.log(t);const f=s=>{x(s),n(!0)},g=()=>{n(!1)},b=s=>{u.Inertia.put(`/categories/${t.id}`,s).then(()=>{h("Category is updated successfully",{position:h.POSITION.TOP_RIGHT}),n(!1)}).catch(p=>{console.error("Error updating category:",p)})},j=s=>{window.confirm(`Are you sure you want to delete category ${s}?`)&&(alert(`Category ${s} is deleted`),u.Inertia.delete(`/categories/${s}`),r(k(s)).then(()=>{u.Inertia.visit("/categories")}).catch(y=>{console.error("Error deleting category:",y)}))};return e.jsxs(w,{user:i.user,children:[e.jsx(C,{}),e.jsxs("section",{children:[e.jsx(S,{isOpen:m,onClose:g,category:t,onSave:b}),d&&o?e.jsxs("div",{className:"mx-[10rem] mt-[3rem]",children:[e.jsx("button",{className:"",onClick:()=>f(c),children:"Edit"}),e.jsx("button",{onClick:()=>j(t.id),className:"text-red-500 hover:text-red-800 mx-[5rem]",children:"Delete This Category"})]}):e.jsx("br",{}),e.jsxs("div",{className:"container mx-auto p-4 text-center mt-[4rem]",children:[e.jsxs("p",{className:"text-[22px] font-serif mb-7",children:["Author :"," ",e.jsxs("span",{className:" text-gray-800 font-semibold",children:[t.user.name," "]})]}),e.jsx("h1",{className:"text-3xl font-bold mb-9",children:t.title}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.description})]})]})]})};export{Q as default};
